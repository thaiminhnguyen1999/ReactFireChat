{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Administrator/Desktop/ReactFireChat/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Administrator/Desktop/ReactFireChat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/ReactFireChat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from'react';import'./App.css';import firebase from'firebase/compat/app';import'firebase/compat/auth';import'firebase/compat/firestore';import{useAuthState}from'react-firebase-hooks/auth';import{useCollectionData}from'react-firebase-hooks/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var firebaseConfig={apiKey:\"AIzaSyD4jpCmTJKexxYsucLrV6FKDn3_z9FvsS8\",authDomain:\"reactchat-ed267.firebaseapp.com\",projectId:\"reactchat-ed267\",storageBucket:\"reactchat-ed267.appspot.com\",messagingSenderId:\"653103223901\",appId:\"1:653103223901:web:f64c20ea62752d6234e9b4\"};firebase.initializeApp(firebaseConfig);var auth=firebase.auth();var firestore=firebase.firestore();function App(){var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"ReactFireChat (Beta)\"}),/*#__PURE__*/_jsx(SignOut,{})]}),/*#__PURE__*/_jsx(\"section\",{children:user?/*#__PURE__*/_jsx(ChatRoom,{}):/*#__PURE__*/_jsx(SignIn,{})})]});}function SignIn(){var signInWithGoogle=function signInWithGoogle(){var provider=new firebase.auth.GoogleAuthProvider();auth.signInWithPopup(provider);};return/*#__PURE__*/_jsx(\"button\",{onClick:signInWithGoogle,children:\"Sign in with Google\"});}function SignOut(){return auth.currentUser&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return auth.signOut();},children:\"Sign Out\"});}function ChatRoom(){var dummy=useRef();var messagesRef=firestore.collection('messages');var query=messagesRef.orderBy('createdAt').limit(25);var _useCollectionData=useCollectionData(query,{idField:'id'}),_useCollectionData2=_slicedToArray(_useCollectionData,1),messages=_useCollectionData2[0];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formValue=_useState2[0],setFormValue=_useState2[1];var sendMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _auth$currentUser,uid,photoURL;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_auth$currentUser=auth.currentUser,uid=_auth$currentUser.uid,photoURL=_auth$currentUser.photoURL;_context.next=4;return messagesRef.add({text:formValue,createdAt:firebase.firestore.FieldValue.serverTimestamp(),uid:uid,photoURL:photoURL});case 4:setFormValue('');dummy.current.scrollIntoView({behavior:'smooth'});case 6:case\"end\":return _context.stop();}},_callee);}));return function sendMessage(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"main\",{children:[messages&&messages.map(function(msg){return/*#__PURE__*/_jsx(ChatMessage,{message:msg},msg.id);}),/*#__PURE__*/_jsx(\"div\",{ref:dummy})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,children:[/*#__PURE__*/_jsx(\"input\",{value:formValue,onChange:function onChange(e){return setFormValue(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u25B6\"})]})]});}function ChatMessage(props){var _props$message=props.message,text=_props$message.text,uid=_props$message.uid,photoURL=_props$message.photoURL;var messageClass=uid===auth.currentUser.uid?'sent':'received';return/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(messageClass,\" \"),children:[/*#__PURE__*/_jsx(\"img\",{src:photoURL,alt:\"Account_Logo\"}),/*#__PURE__*/_jsx(\"p\",{children:text})]});}export default App;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}